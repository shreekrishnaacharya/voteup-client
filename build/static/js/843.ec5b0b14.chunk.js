"use strict";(self.webpackChunkStore=self.webpackChunkStore||[]).push([[843],{843:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ee}});var r=n(3830),i=n(4886),s=n(5861),a=n(885),l=n(7757),o=n.n(l),c=n(3428),d=n(7313),u=n(7829),h=n(3800),x=n(8879),p=n(5812),m=n(4876),Z=n(2252),j=(0,n(8070).Z)((function(e){var t=e.borders,n=t.borderWidth,r=t.borderColor;return{tables_table:{"& .MuiTableRow-root:not(:last-child)":{"& td":{borderBottom:"".concat(n[1]," solid ").concat(r)}}}}})),f=n(8673),g=n(4488),v=n(7970),y=n(6417),b={0:{batch:"Pending",color:"info"},1:{batch:"Ordered",color:"primary"},2:{batch:"Received",color:"success"},3:{batch:"Return",color:"error"}},S={0:{batch:"Pending",color:"warning"},1:{batch:"Partial",color:"primary"},2:{batch:"Paid",color:"success"}};function A(e){var t=e.text,n=e.edge,r=e.warpLength;return(0,y.jsx)(u.Z,{display:"flex",pl:n?2.5:.5,pr:n?2.5:.5,pt:1.5,pb:1.25,children:(0,y.jsx)(x.Z,{variant:"caption",fontWeight:"medium",warpLength:r,children:t})})}function C(e){var t=e.status;return(0,y.jsx)(f.Z,{variant:"gradient",badgeContent:b[t].batch,color:b[t].color,size:"extra-small"})}function w(e){var t=e.status;return(0,y.jsx)(f.Z,{variant:"gradient",badgeContent:S[t].batch,color:S[t].color,size:"extra-small"})}var P=function(e,t){return e.map((function(e){var n=e.id,r=e.date,i=e.ref_no,s=e.customer,a=e.pstatus,l=e.pay_amt,o=e.total_amt,c=e.status;return{pdate:(0,y.jsx)(A,{text:r}),refno:(0,y.jsx)(A,{text:i}),customer:(0,y.jsx)(A,{text:s}),status:(0,y.jsx)(C,{status:c}),amt:(0,y.jsx)(A,{text:o}),pay_amt:(0,y.jsx)(A,{text:l}),balance:(0,y.jsx)(A,{text:o-l}),pstatus:(0,y.jsx)(w,{status:a}),action:(0,y.jsx)("a",{style:{cursor:"pointer"},onClick:function(){t(n,i)},children:(0,y.jsx)(x.Z,{variant:"caption",textColor:"primary",fontWeight:"medium",children:"View"})})}}))},_=[{name:"pdate",label:"DATE",align:"left"},{name:"refno",label:"Ref No.",align:"left"},{name:"customer",align:"left"},{name:"status",align:"center"},{name:"amt",label:"AMOUNT",align:"left"},{name:"pay_amt",label:"PAID",align:"left"},{name:"balance",align:"left"},{name:"pstatus",label:"PAY STATUS",align:"center"},{name:"action",align:"center"}],k=C,F=w,R=n(1413),W=n(57),E=function(){var e=(0,s.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,W.jY)((0,R.Z)({},t)).then((function(e){return{flag:!0,headers:e.headers,status:e.status,message:"Success",data:e.data}})).then((function(e){return e})).catch((function(e){return{flag:!1,status:e.status,message:"Error",data:e.data}}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(e){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/sales",data:(0,R.Z)({},t)}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/sales/"+t+"?expand=sitems,payments"}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/sales/delete/?id="+t,method:"delete"}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/sales/create",method:"post",data:(0,W.HB)(t),headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return O.apply(this,arguments)}function O(){return(O=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/customer/list",data:{q:t}}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/room/list",data:{q:t}}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return X.apply(this,arguments)}function X(){return(X=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/item/list",data:{q:t}}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return K.apply(this,arguments)}function K(){return(K=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/sales/status",data:{q:t}}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=(0,s.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/sales/addpayment/?id="+t,method:"post",data:n}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return J.apply(this,arguments)}function J(){return(J=(0,s.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({url:"/store/sales/return/?id="+t,method:"post",data:(0,W.HB)(n),headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=n(8303);var ee=function(){var e=j(),t=(0,r.k6)(),n=(0,d.useState)({saless:null,pg:{size:0,pages:0,current:0,total:0}}),i=(0,a.Z)(n,2),l=i[0],f=i[1],b=l.saless,S=l.pg,A=function(e,n){t.push({pathname:Z.AR.SALES_VIEW,search:"?"+n.replace(" ","-").toLowerCase(),state:{id:e,name:n}})},C=function(e,t){S.current!=t&&w(t)};function w(e){return k.apply(this,arguments)}function k(){return(k=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({page:t}).then((function(e){e.flag&&(Object.keys(e.data).length?f({saless:e.data,pg:{size:parseInt(e.headers["x-pagination-per-page"]),pages:parseInt(e.headers["x-pagination-page-count"]),current:parseInt(e.headers["x-pagination-current-page"]),total:parseInt(e.headers["x-pagination-total-count"])}}):f({saless:[],pg:{size:0,pages:0,current:0,total:0}}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,d.useEffect)((function(){return w(0),function(){f({saless:[],pg:{}})}}),[]);var F=function(){return null===b?(0,y.jsx)("div",{children:(0,y.jsx)(m.Z,{columns:_,rows:[{pdate:[{colSpan:"9"},(0,y.jsx)(g.Z,{animation:"wave",variant:"text",width:"80%",height:30})]},{pdate:[{colSpan:"9"},(0,y.jsx)(g.Z,{animation:"wave",variant:"text",width:"70%",height:30})]},{pdate:[{colSpan:"9"},(0,y.jsx)(g.Z,{animation:"wave",variant:"text",width:"90%",height:30})]}]})}):0==b.length?(0,y.jsx)("div",{children:(0,y.jsx)(m.Z,{columns:_,rows:[{pdate:[{colSpan:"9",style:{textAlign:"center"}},(0,y.jsx)(x.Z,{component:"span",textColor:"secondary",fontWeight:"medium",p:20,children:"No data found"})]}]})}):(0,y.jsxs)("div",{children:[(0,y.jsx)(m.Z,{columns:_,rows:P(b,A)}),(0,y.jsx)(u.Z,{mt:1,mb:2,style:{float:"right"},children:(e=S,t=C,(0,y.jsx)(v.Z,{variant:"outlined",count:e.pages,page:e.current,color:"primary",siblingCount:2,boundaryCount:2,onChange:t}))})]});var e,t};return(0,y.jsx)(u.Z,{py:3,children:(0,y.jsx)(u.Z,{mb:3,children:(0,y.jsxs)(c.Z,{children:[(0,y.jsxs)(u.Z,{display:"flex",justifyContent:"space-between",alignSaless:"center",p:3,children:[(0,y.jsx)(x.Z,{variant:"h6",children:Z.S3.SALES_LIST}),(0,y.jsx)($.rU,{to:Z.AR.SALES_ADD,children:(0,y.jsx)(p.Z,{buttonColor:"secondary",children:"Add Sales"})})]}),(0,y.jsx)(h.Z,{customClass:e.tables_table,children:(0,y.jsx)(F,{})})]})})})},te=n(5987),ne=n(5627),re=n(4032),ie=n(1432),se=n(6834),ae=n(2982),le=n(9019),oe=n(6835),ce=n(3467),de=n(7478),ue=n(1629),he=n(3477),xe=n(4076),pe=n(5539),me=n(1263),Ze=n(9841),je=n(9516),fe=function(e){var t=e.control,n=e.handleSubmit,r=e.onSubmitHandler,i=e.isNewSales,l=e.errors,h=e.getValues,m=e.setValue,Z=(0,d.useState)(null),j=(0,a.Z)(Z,2),f=j[0],g=j[1],v=(0,d.useState)({itemList:[],totAmt:0,gtAmt:0,totQty:0}),b=(0,a.Z)(v,2),S=b[0],A=b[1],C=0,w=[];for(var P in l)w[C]=(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"li",children:l[P].message},P),C++;var _=(0,ne.Dq)({control:t,name:"items"}),k=_.fields,F=_.append,W=_.remove,E=function(){var e=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t).then((function(e){return e.flag?e.data:[]}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t).then((function(e){return e.flag?e.data:[]}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t).then((function(e){return e.flag?e.data:[]}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t).then((function(e){return e.flag?e.data:[]}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Q(){var e=0,t=0,n=h("items"),r=(0,ae.Z)(S.itemList);n.forEach((function(n,i){e+=parseFloat(n.qty),t+=parseFloat(parseFloat(n.cost*n.qty)),r[i]=parseFloat(n.cost*n.qty)}));var i=parseFloat(h("vat_rate")),s=t-parseFloat(h("dis_amt"));A({itemList:r,gtAmt:s+s*(i/100),totAmt:t,totQty:e})}return(0,y.jsx)(u.Z,{py:3,children:(0,y.jsx)(u.Z,{mb:3,children:(0,y.jsx)(c.Z,{children:(0,y.jsx)(u.Z,{pt:2,pb:3,px:3,children:(0,y.jsx)("form",{onSubmit:n(r),children:(0,y.jsxs)(le.ZP,{container:!0,spacing:2,children:[(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Date"}),(0,y.jsx)(ne.Qr,{name:"ptdate",control:t,defaultValue:"",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{error:r.invalid,type:"date"})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Refrence No."}),(0,y.jsx)(ne.Qr,{name:"ref_no",control:t,defaultValue:"",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Warehouse"}),(0,y.jsx)(ne.Qr,{name:"fstore",control:t,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ze.Z,(0,R.Z)((0,R.Z)({},n),{},{label:"nam",onChange:function(e,t){m("fstore",t?t.id:null)},handleOptions:E,error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Status"}),(0,y.jsx)(ne.Qr,{name:"sts",control:t,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ze.Z,(0,R.Z)((0,R.Z)({},n),{},{onChange:function(e,t){m("sts",t?t.id:null)},handleOptions:L,error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Customer"}),(0,y.jsx)(ne.Qr,{name:"fcus",control:t,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ze.Z,(0,R.Z)((0,R.Z)({},n),{},{onChange:function(e,t){m("fcus",t?t.id:null)},handleOptions:T,error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Shipping"}),(0,y.jsx)(ne.Qr,{name:"shipping",control:t,defaultValue:"",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Payment Terms(In days)"}),(0,y.jsx)(ne.Qr,{name:"pym_term",control:t,defaultValue:"0",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Attachment"}),(0,y.jsx)(ne.Qr,{name:"attachfile",control:t,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(je.Z,(0,R.Z)((0,R.Z)({},n),{},{onChange:function(e){n.onChange(e)},children:(0,y.jsx)(x.Z,{textColor:"secondary",variant:"caption",component:"span",children:"Select File"})})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsx)(le.ZP,{item:!0,xs:12,lg:12,children:(0,y.jsxs)(le.ZP,{container:!0,spacing:2,direction:"row",children:[(0,y.jsxs)(le.ZP,{item:!0,xs:8,lg:10,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Items"}),(0,y.jsx)(ne.Qr,{name:"itemselect",control:t,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ze.Z,(0,R.Z)((0,R.Z)({},n),{},{value:h("itemselect"),onChange:function(e,t){g(t||null)},handleOptions:q,error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=l.items)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:2,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"\xa0"}),(0,y.jsxs)(p.Z,{buttonColor:"success",disabled:null===f,onClick:function(){F({itemid:f.id,name:f.name,cost:f.sprice,qty:1,mqty:f.avi_qty}),Q(),g(null)},children:[(0,y.jsx)(me.Z,{className:"material-icons-round",children:"add"})," Add"]})]})]})}),(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsx)(ue.Z,{children:(0,y.jsxs)(oe.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,y.jsx)(he.Z,{style:{backgroundColor:"#eee"},children:(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Name"})}),(0,y.jsx)(de.Z,{style:{width:"10%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Net Unit Cost"})}),(0,y.jsx)(de.Z,{style:{width:"12%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Quantity"})}),(0,y.jsx)(de.Z,{style:{width:"15%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Total"})}),(0,y.jsx)(de.Z,{style:{width:"10%"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Action"})})]})}),(0,y.jsx)(ce.Z,{children:k.map((function(e,n){return(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.name})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(ne.Qr,{name:"items.".concat(n,".cost"),control:t,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{size:"small",style:{textAlign:"right"},onChange:function(e){n.onChange(e.target.value),Q()},error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(ne.Qr,{name:"items.".concat(n,".qty"),control:t,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{type:"number",size:"small",style:{textAlign:"right"},min:0,error:r.invalid,onChange:function(e){n.onChange(e.target.value),Q()}})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:S.itemList[n]})}),(0,y.jsxs)(de.Z,{children:[(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span"}),(0,y.jsx)(p.Z,{style:{marginLeft:"5px"},iconOnly:!0,buttonColor:"error",onClick:function(){W(n),Q()},children:(0,y.jsx)(me.Z,{className:"material-icons-round",children:"delete"})})]})]},e.id)}))}),(0,y.jsxs)(u.Z,{component:"tfoot",children:[(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{colSpan:2,children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Total"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:S.totQty})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:S.totAmt})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Action"})})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Discount"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(ne.Qr,{name:"dis_amt",control:t,defaultValue:"0",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{size:"small",onChange:function(e){n.onChange(e.target.value),Q()},error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})}),(0,y.jsx)(de.Z,{})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Vat Rate"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(ne.Qr,{name:"vat_rate",control:t,defaultValue:"0",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{size:"small",onChange:function(e){n.onChange(e.target.value),Q()},error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})}),(0,y.jsx)(de.Z,{})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Grand Total"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:S.gtAmt}),(0,y.jsx)(de.Z,{})]})]})]})})}),(0,y.jsx)(le.ZP,{item:!0,xs:9,children:w}),(0,y.jsx)(le.ZP,{item:!0,xs:3,children:(0,y.jsx)(p.Z,{style:{float:"right"},type:"submit",buttonColor:i?"primary":"secondary",children:i?"Save":"Update"})})]})})})})})})};fe.defaultProps={isNewSales:!0};var ge=fe,ve=["formState"],ye=se.Ry({attachfile:se.nK().test("fileSize","Max file size is 1MB",(function(e,t){return!e||e[0].size<12e5})).test("type","Only jpg,jpeg,png,pdf are supported",(function(e){return!e||"image/jpeg"===e[0].type||"image/jpg"===e[0].type||"image/png"===e[0].type||"application/pdf"===e[0].type})),ptdate:se.Z_().required().max(100).label("Date"),fcus:se.Z_().max(100).label("Customer"),fstore:se.Rx().positive().integer().required().label("Warehouse"),pym_term:se.Rx().integer().typeError("Payment Terms must be a number").min(0,"Min value 0.").label("Payment Terms"),sts:se.Rx().required().label("Status"),ref_no:se.Z_().label("Referance"),remark:se.Z_().label("Remark"),shipping:se.Z_().label("Shipping"),dis_amt:se.Rx().typeError("Must be a number").min(0,"Min value 0.").label("Discount"),vat_rate:se.Rx().typeError("Must be a number").min(0,"Min value 0.").label("Vat"),items:se.IX().min(1,"Create at least 1 item")});var be=function(){var e=(0,ne.cI)({resolver:(0,ie.X)(ye)}),t=e.formState.errors,n=(0,te.Z)(e,ve),a=(0,re.Ds)().enqueueSnackbar,l=(0,r.k6)();function c(){return(c=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,N(t).then((function(e){var t=e.flag,n=e.data;t?(a("Sales add success",{variant:"success"}),l.push({pathname:i.AR.SALES_VIEW,search:"?"+n.ref_no.replace(" ","-").toLowerCase(),state:{id:n.id,name:n.ref_no}})):a("Sales add failed",{variant:"error"})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,y.jsx)(ge,(0,R.Z)((0,R.Z)({},n),{},{onSubmitHandler:function(e){return c.apply(this,arguments)},errors:t}))},Se=n(6352),Ae=n(6149),Ce=n(4117),we=n(6467),Pe=n(3604),_e=se.Ry({amount:se.Rx().required().label("Amount")}),ke=function(e){var t=e.isOpen,n=e.handleClose,r=e.saleModel,i=e.callBack,a=(0,ne.cI)({resolver:(0,ie.X)(_e)}),l=a.control,c=a.handleSubmit,u=a.reset;a.setError;function h(){return(h=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.amount);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.useEffect)((function(){u({amount:r.total_amt-r.pay_amt})}),[t]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(Ae.Z,{keepMounted:!0,maxWidth:"md",open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,y.jsxs)(Pe.Z,{id:"alert-dialog-title2",children:["Add Payment : ",r.ref_no]}),(0,y.jsx)(we.Z,{children:(0,y.jsx)(le.ZP,{container:!0,spacing:2,direction:"row",children:(0,y.jsxs)(le.ZP,{item:!0,xs:12,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Payment Amount"}),(0,y.jsx)(ne.Qr,{defaultValue:"",name:"amount",control:l,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]})})}),(0,y.jsxs)(Ce.Z,{children:[(0,y.jsx)(p.Z,{onClick:n,buttonColor:"light",children:"Close"}),(0,y.jsx)(p.Z,{onClick:c((function(e){return h.apply(this,arguments)})),buttonColor:"secondary",children:"Save"})]})]})})};var Fe=function(){var e=(0,re.Ds)().enqueueSnackbar,t=(0,r.k6)(),n=(0,d.useState)({}),l=(0,a.Z)(n,2),c=l[0],m=l[1],Z=(0,d.useState)({add:!1,update:!1,purc:{}}),j=(0,a.Z)(Z,2),f=j[0],v=j[1],b=(0,Se.v9)((function(e){return e.navPath.curr})),S=b.id,A=b.name,C=k,w=F;function P(){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(S).then((function(e){e.flag&&m(e.data)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,d.useEffect)((function(){return void 0!==S&&P(),function(){return m({})}}),[S]);var E=function(){v((0,R.Z)((0,R.Z)({},f),{},{add:!1}))};if(0===Object.keys(c).length)return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(h.Z,{backgroundColor:"white",borderRadius:"lg",p:3,mb:1,mt:2,children:(0,y.jsx)(le.ZP,{container:!0,spacing:4,children:(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsxs)(le.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsx)(g.Z,{animation:"wave",variant:"text",width:"30%",height:30})}),(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsx)(g.Z,{animation:"wave",variant:"text",width:"20%",height:30})}),(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsx)(g.Z,{animation:"wave",variant:"text",width:"40%",height:30})}),(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsx)(g.Z,{animation:"wave",variant:"text",width:"20%",height:30})})]})})})})});var q=0;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Z,{backgroundColor:"white",borderRadius:"lg",p:3,mb:1,mt:2,children:(0,y.jsxs)(u.Z,{width:"100%",display:"flex",flexDirection:"column",children:[(0,y.jsx)(u.Z,{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},mb:2,children:(0,y.jsxs)(u.Z,{display:"flex",alignItems:"center",mt:{xs:2,sm:0},ml:{xs:-1.5,sm:0},children:[c.total_amt!=c.pay_amt&&(0,y.jsx)(u.Z,{mr:1,children:(0,y.jsxs)(p.Z,{buttonColor:"success",onClick:function(){return v((0,R.Z)((0,R.Z)({},f),{},{add:!0}))},children:[(0,y.jsx)(me.Z,{className:"material-icons-round",children:"paid"}),"\xa0\xa0Add"]})}),3!=c.status&&1!=c.has_return&&(0,y.jsx)(u.Z,{mr:1,children:(0,y.jsxs)(p.Z,{buttonColor:"warning",onClick:function(){t.push({pathname:i.AR.SALES_RETURN,search:"?"+A.replace(" ","-").toLowerCase(),state:{id:S,name:A}})},children:[(0,y.jsx)(me.Z,{className:"material-icons-round",children:"assignment_return"}),"\xa0\xa0Return"]})}),(0,y.jsx)(u.Z,{mr:1,children:(0,y.jsxs)(p.Z,{buttonColor:"error",onClick:function(){var n=function(){var e=(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(S));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,W.yo)({title:"Are you sure?"},n).then((function(n){null!==n&&(n.flag?(e("Sales delete success",{variant:"success"}),t.push({pathname:i.AR.SALES_LIST})):e("Sales delete failed",{variant:"error"}))}))},children:[(0,y.jsx)(me.Z,{className:"material-icons-round",children:"delete"}),"\xa0\xa0delete"]})})]})}),(0,y.jsx)(le.ZP,{container:!0,children:(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsxs)(le.ZP,{container:!0,children:[(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Date"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.date]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Ref. No"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.ref_no]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Sale Status"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0",(0,y.jsx)(C,{status:c.status})]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Customer"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.customer]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Pay Status"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0",(0,y.jsx)(w,{status:c.pstatus})]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Shipping"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.shipping]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Pay Terms"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.pym_term+" "+(c.pym_term>1?"days":"day")]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Store"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.store]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Create At"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.create_at]})}),(0,y.jsx)(le.ZP,{item:!0,xs:4,lg:2,children:(0,y.jsx)(x.Z,{fontWeight:"regular",children:"Create By"})}),(0,y.jsx)(le.ZP,{item:!0,xs:8,lg:4,children:(0,y.jsxs)(x.Z,{fontWeight:"medium",children:[":\xa0\xa0",c.create_by]})})]})})})]})}),(0,y.jsxs)(u.Z,{mb:1,mt:2,children:[(0,y.jsx)(x.Z,{fontWeight:"bold",textColor:"secondary",textTransform:"uppercase",children:"Items List"}),(0,y.jsx)(ue.Z,{children:(0,y.jsxs)(oe.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,y.jsx)(he.Z,{style:{backgroundColor:"#eee"},children:(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Name"})}),(0,y.jsx)(de.Z,{style:{width:"10%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Net Unit Cost"})}),(0,y.jsx)(de.Z,{style:{width:"12%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Quantity"})}),(0,y.jsx)(de.Z,{style:{width:"15%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Total"})})]})}),(0,y.jsx)(ce.Z,{children:c.sitems.map((function(e,t){return q+=parseFloat(e.qty),(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.name})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.rate})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.qty})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.rate*e.qty})})]},t)}))}),(0,y.jsxs)(u.Z,{component:"tfoot",children:[(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{colSpan:2,children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Total"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:q})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:c.amt})})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsxs)(x.Z,{variant:"subtitle2",component:"div",children:["Discount (",c.dis_per,"%)"]})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:c.dis_amt})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsxs)(x.Z,{variant:"subtitle2",component:"div",children:["Vat (",c.vat_rate,"%)"]})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:c.vat_amt})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Grand Total"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:c.total_amt})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Paid"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:c.pay_amt})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Balance"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:c.total_amt-c.pay_amt})]})]})]})})]}),(0,y.jsxs)(u.Z,{mb:1,mt:2,children:[(0,y.jsx)(x.Z,{fontWeight:"bold",textColor:"secondary",textTransform:"uppercase",children:"Payments"}),(0,y.jsx)(ue.Z,{children:(0,y.jsxs)(oe.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,y.jsx)(he.Z,{style:{backgroundColor:"#eee"},children:(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"SNO"})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Date"})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Amount"})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Added By"})})]})}),(0,y.jsx)(ce.Z,{children:c.payments.map((function(e,t){return(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:t+1})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.cat})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.amt})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.name})})]},t)}))})]})})]}),(0,y.jsx)(ke,{isOpen:f.add,saleModel:c,handleClose:E,callBack:function(t){(function(e,t){return G.apply(this,arguments)})(c.id,{amount:t}).then((function(t){t.flag?(e("Payment add success",{variant:"success"}),P()):e("Payment add failed",{variant:"error"}),E()}))}})]})},Re=se.Ry({attachfile:se.nK().test("fileSize","Max file size is 1MB",(function(e,t){return!e||e[0].size<12e5})).test("type","Only jpg,jpeg,png,pdf are supported",(function(e){return!e||"image/jpeg"===e[0].type||"image/jpg"===e[0].type||"image/png"===e[0].type||"application/pdf"===e[0].type})),ptdate:se.Z_().required().max(100).label("Date"),ref_no:se.Z_().label("Referance"),rchg:se.Rx().typeError("Discount must be a number").min(0,"Min value 0.").label("Discount"),items:se.IX().min(1,"Keep at least 1 item")}),We=function(){(0,r.k6)();var e=(0,d.useState)({}),t=(0,a.Z)(e,2),n=t[0],i=t[1],l=(0,Se.v9)((function(e){return e.navPath.curr})),h=l.id,m=(l.name,(0,d.useState)({itemList:[],totAmt:0,gtAmt:0,totQty:0})),Z=(0,a.Z)(m,2),j=Z[0],f=Z[1],g=(0,ne.cI)({resolver:(0,ie.X)(Re)}),v=(g.formState.errors,g.control),b=g.handleSubmit,S=g.getValues,A=(g.setValue,(0,re.Ds)().enqueueSnackbar);function C(){return(C=(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(h).then((function(e){e.flag&&i(e.data)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(h,t).then((function(e){var t=e.flag;e.data;t?A("Sales return success",{variant:"success"}):A("Sales return failed",{variant:"error"})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=(0,ne.Dq)({control:v,name:"items"}),_=P.fields,k=P.append,F=P.remove;function W(){var e=0,t=0,r=0,i=0|parseFloat(S("rchg")),s=S("items"),a=(0,ae.Z)(j.itemList),l=parseFloat(n.dis_amt),o=parseFloat(n.vat_rate);s.forEach((function(n,r){e+=0|parseFloat(n.qty),t+=0|parseFloat(parseFloat(n.cost*n.qty)),a[r]=parseFloat(n.cost*n.qty)})),t-=i,r=parseFloat(o/100*(t-l));var c=parseFloat(t-l+r).toFixed(2);f({itemList:a,gtAmt:c,totAmt:t,totQty:e,totVat:r.toFixed(2)})}return(0,d.useEffect)((function(){return 0===Object.keys(n).length&&void 0!==h&&function(){C.apply(this,arguments)}(),function(){return i({})}}),[]),(0,d.useEffect)((function(){n.sitems&&n.sitems.forEach((function(e,t){k({itemid:e.fsal,name:e.name,cost:e.rate,qty:e.qty})}))}),[n]),(0,d.useEffect)((function(){W()}),[_]),(0,y.jsx)(u.Z,{py:3,children:(0,y.jsx)(u.Z,{mb:3,children:(0,y.jsx)("form",{onSubmit:b((function(e){return w.apply(this,arguments)})),children:(0,y.jsx)(c.Z,{children:(0,y.jsx)(u.Z,{pt:2,pb:3,px:3,children:(0,y.jsxs)(le.ZP,{container:!0,spacing:2,children:[(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Date"}),(0,y.jsx)(ne.Qr,{name:"ptdate",control:v,defaultValue:"",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{error:r.invalid,type:"date"})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Refrence No."}),(0,y.jsx)(ne.Qr,{name:"ref_no",control:v,defaultValue:"",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Return Surcharge"}),(0,y.jsx)(ne.Qr,{name:"rchg",control:v,defaultValue:"0",render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{onChange:function(e){n.onChange(e.target.value),W()},error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsxs)(le.ZP,{item:!0,xs:12,lg:3,children:[(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Attachment"}),(0,y.jsx)(ne.Qr,{name:"attachfile",control:v,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(je.Z,(0,R.Z)((0,R.Z)({},n),{},{onChange:function(e){n.onChange(e)},children:(0,y.jsx)(x.Z,{textColor:"secondary",variant:"caption",component:"span",children:"Select File"})})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})]}),(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsx)(ue.Z,{children:(0,y.jsxs)(oe.Z,{"aria-labelledby":"tableTitle",size:"small",children:[(0,y.jsx)(he.Z,{style:{backgroundColor:"#eee"},children:(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Name"})}),(0,y.jsx)(de.Z,{style:{width:"10%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Net Unit Cost"})}),(0,y.jsx)(de.Z,{style:{width:"12%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Return Qty"})}),(0,y.jsx)(de.Z,{style:{width:"15%",textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Total"})}),(0,y.jsx)(de.Z,{style:{width:"10%"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Action"})})]})}),(0,y.jsx)(ce.Z,{children:_.map((function(e,t){return(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:e.name})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(ne.Qr,{name:"items.".concat(t,".cost"),control:v,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{size:"small",style:{textAlign:"right"},onChange:function(e){n.onChange(e.target.value),W()},error:r.invalid})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(ne.Qr,{name:"items.".concat(t,".qty"),control:v,render:function(e){var t,n=e.field,r=e.fieldState;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.Z,(0,R.Z)((0,R.Z)({},n),{},{type:"number",size:"small",style:{textAlign:"right"},min:0,error:r.invalid,onChange:function(e){n.onChange(e.target.value),W()}})),(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span",children:null===(t=r.error)||void 0===t?void 0:t.message})]})}})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"body2",component:"div",children:j.itemList[t]})}),(0,y.jsxs)(de.Z,{children:[(0,y.jsx)(x.Z,{textColor:"error",variant:"caption",component:"span"}),(0,y.jsx)(p.Z,{style:{marginLeft:"5px"},iconOnly:!0,buttonColor:"error",onClick:function(){F(t),W()},children:(0,y.jsx)(me.Z,{className:"material-icons-round",children:"delete"})})]})]},e.id)}))}),(0,y.jsxs)(u.Z,{component:"tfoot",children:[(0,y.jsxs)(xe.Z,{children:[(0,y.jsx)(de.Z,{colSpan:2,children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Total"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:j.totQty})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:j.totAmt})}),(0,y.jsx)(de.Z,{children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Action"})})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Discount"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsxs)(x.Z,{variant:"subtitle2",component:"div",children:["-",n.dis_amt]})}),(0,y.jsx)(de.Z,{})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Vat"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:j.totVat})}),(0,y.jsx)(de.Z,{})]}),(0,y.jsxs)(xe.Z,{style:{border:"none"},children:[(0,y.jsx)(de.Z,{colSpan:3,style:{textAlign:"right"},children:(0,y.jsx)(x.Z,{variant:"subtitle2",component:"div",children:"Return Amount"})}),(0,y.jsx)(de.Z,{style:{textAlign:"right"},children:j.gtAmt}),(0,y.jsx)(de.Z,{})]})]})]})})}),(0,y.jsx)(le.ZP,{item:!0,xs:12,children:(0,y.jsx)(p.Z,{style:{float:"right"},type:"submit",buttonColor:"secondary",children:"Update"})})]})})})})})})};var Ee=function(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.AW,{exact:!0,path:i.AR.SALES_LIST,component:ee}),(0,y.jsx)(r.AW,{exact:!0,path:i.AR.SALES_ADD,component:be}),(0,y.jsx)(r.AW,{exact:!0,path:i.AR.SALES_VIEW,component:Fe}),(0,y.jsx)(r.AW,{exact:!0,path:i.AR.SALES_RETURN,component:We})]})}}}]);